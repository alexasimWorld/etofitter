<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Crew Platform</title>
    <link rel="stylesheet" href="styles.css" />
</head>
<body>

    <!-- LOGIN SCREEN -->
    <div id="loginScreen" class="loginScreen">
        <div class="loginCard">
            <div class="loginBrand">
                <div class="brandMark"></div>
                <div>
                    <div class="loginTitle">CREW PLATFORM</div>
                    <div class="loginSub">Secure Role Access</div>
                </div>
            </div>

            <div class="loginField">
                <label>Select Role</label>
                <select id="loginRole">
                    <option value="">— Choose role —</option>
                    <option value="manager">Crew Manager</option>
                    <option value="principal">Principal Company</option>
                </select>
            </div>

            <div class="loginField">
                <label>Password</label>
                <input id="loginPassword" type="password" placeholder="Enter access code" />
                <div class="loginHint">
                    Crew Manager: <b>0000</b> &nbsp;•&nbsp; Principal Company: <b>1111</b>
                </div>
            </div>

            <button id="loginBtn" class="btn loginBtn">Access Platform</button>

            <div id="loginError" class="loginError hidden">
                Invalid role or password
            </div>
        </div>
    </div>



    <div id="appRoot" class="app hidden">

        <!-- LEFT PANE -->
        <aside class="sidebar">
            <div class="brand">
                <div class="brandMark"></div>
                <div class="brandText">
                    <div class="brandTitle">ETO/FITTER CREW DATA</div>
                    <div class="brandSub">CROSSWORLD</div>
                </div>
            </div>

            <div class="sidebarSection">
                <div class="sidebarHeader">Crew Types</div>
                <nav id="typeList" class="typeList"></nav>
            </div>

            <div class="sidebarFooter">
                <div class="hint">Tip: Select a type → choose a crew → full profile opens.</div>

                <div style="height:12px"></div>

                <button id="exportJsonBtn" class="btn small ghost" style="width:100%">
                    Export File (Save as .JSON)
                </button>

                <div style="height:8px"></div>

                <button id="importJsonBtn" class="btn small ghost" style="width:100%">
                    Import file (Existing .JSON)
                </button>
            </div>

        </aside>

        <!-- RIGHT PANE -->
        <main class="main">
            <!-- Top bar -->
            <header class="topbar">
                <div class="topbarLeft">
                    <div id="viewTitle" class="viewTitle">All Crew</div>
                    <div id="viewSubtitle" class="viewSubtitle">Select a type from the left</div>
                </div>

                <div class="topbarRight">
                    <div class="searchWrap">
                        <input id="searchInput" class="search" placeholder="Search crew…" />
                        <span class="searchIcon">⌕</span>
                    </div>

                    <button id="addCrewBtn" class="btn small">+ Add Crew</button>
                    <button id="editCrewBtn" class="btn small hidden">Edit</button>
                    <button id="deleteCrewBtn" class="btn small ghost hidden">Delete</button>
                </div>
            </header>

            <!-- Content area -->
            <section class="content" id="contentArea">
                <!-- LIST VIEW -->
                <div id="listView" class="listView">
                    <div id="crewGrid" class="crewGrid"></div>
                </div>

                <!-- PROFILE VIEW -->
                <div id="profileView" class="profileView hidden">
                    <div class="profileHeader">
                        <button id="backBtn" class="btn ghost">← Back</button>
                        <div class="profileHeaderMeta">
                            <div id="profileName" class="profileName">Crew Name</div>
                            <div id="profileRole" class="profileRole">Role • Rank</div>
                        </div>
                    </div>

                    <div class="profileBody">
                        <div class="panel tabPanel">
                            <div class="tabsBar" id="tabsBar"></div>
                            <div class="tabBody" id="tabBody"></div>
                        </div>
                    </div>



                </div>
            </section>


            <div id="coursePopup" class="modal hidden">
                <div class="modalCard" style="max-width:900px">
                    <div class="modalHeader">
                        <div class="modalTitle">Select training course (Only shows available courses per rank)</div>
                        <button id="closeCoursePopup" class="btn ghost small">✕</button>
                    </div>

                    <div class="modalBody">
                        <div class="courseSearchWrap">
                            <input id="courseSearchInput"
                                   class="courseSearch"
                                   placeholder="Search courses…" />
                        </div>

                        <div id="courseGrid" class="courseGrid"></div>
                    </div>

                </div>
            </div>

        </main>
    </div>

    <!-- Crew data files FIRST -->
    <script src="js/eto.js"></script>
    <script src="js/fitters.js"></script>

    <!-- App logic LAST -->
    <script src="js/courses.js"></script>
    <script src="js/app.js"></script>

    <!-- Modal: Add/Edit Crew -->
    <div id="crewEditor" class="modal hidden">
        <div class="modalCard">
            <div class="modalHeader">
                <div id="editorTitle" class="modalTitle">Add Crew</div>
                <button id="closeEditorBtn" class="btn ghost small">✕</button>
            </div>

            <div class="modalBody" id="editorForm"></div>

            <div class="modalFooter">
                <button id="saveCrewBtn" class="btn">Save</button>
                <button id="cancelCrewBtn" class="btn ghost">Cancel</button>
            </div>
        </div>
    </div>

    <input id="jsonFileInput"
           type="file"
           accept=".json,application/json"
           hidden />


</body>
</html>
